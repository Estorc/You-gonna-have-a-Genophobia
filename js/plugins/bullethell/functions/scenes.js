var BHscenes = {"King Kong Battle":{"name":"King Kong Battle","id":1,"load":" (thisTurn, _this, skillParam) {\r\n\t\r\n\tSceneManager._scene._statusWindow.visible = false;\r\n\tlet bgImage = \"kingkong_attackbg\";\r\n\t\r\n\tif (skillParam > 0 ) {\r\n\t\r\n\t\t_this.ppg_attackPaternID = skillParam;\r\n\t\tbgImage = \"ppg_attackbgonly\";\r\n\t\r\n\t}\r\n\t\r\n\tif ($tempAniSpeed == 0) {\r\n\t\t$tempAniSpeed = ConfigManager[\"battleAniSpeed\"]\r\n\t}\r\n\tConfigManager[\"battleAniSpeed\"] = 0\r\n\t\r\n\tif (!$gameMessage.isBusy()) {\r\n\t\t\r\n\t\t// Do the actions\r\n\t\tif (_this.ppg_action == 0) {\r\n\t\t\t\r\n\t\t\t_this.active = true;\r\n\t\t\tppg_currentSubject = null;\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t_this.ppg_lastdialogue = 0;\r\n\t\t\t_this.soulDirection = 8;\r\n\t\t\t_this.plshot_timer = 2;\r\n\t\t\t_this.PlayerCollisionX1 = 10;\r\n\t\t\t_this.PlayerCollisionX2 = 24;\r\n\t\t\t_this.PlayerCollisionY1 = 37;\r\n\t\t\t_this.PlayerCollisionY2 = 52;\r\n\t\t\t$gameSwitches.setValue(514, false);\r\n\t\t\t\r\n\t\t\tAudioManager.playSe({name: 'ppg_noise', pan: 0, pitch: 100, volume: 100});\r\n\t\t\t\r\n\t\t\t_this.objects = [];\r\n\t\t\t_this.BHBitmap = new Bitmap(1280 + _this.bhmaxwidth,720 + _this.bhmaxheight);\r\n\t\t\t\r\n\t\t\tparams = [2, bgImage, 0, 0, 0, 0, 100, 100, 255, 0]\r\n\t\t\t\r\n\t\t\tlet point = Game_Interpreter.prototype.picturePoint.call(null, params);\r\n\t\t\t// prettier-ignore\r\n\t\t\t$gameScreen.showPicture(\r\n\t\t\t\tparams[0], params[1], params[2], point.x, point.y,\r\n\t\t\t\tparams[6], params[7], params[8], params[9]\r\n\t\t\t);\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t_this.ppg_action = 1;\r\n\t\t\t_this.showPictureBellow = 1;\r\n\t\t\tconst subject = thisTurn._subject;\r\n\t\t\tconst action = subject.currentAction();\r\n\t\t\t\r\n\t\t\tlet ppg_attackPaternDuration = [1000,1400,500,800,650,1000,1400,2000,1500,1500,2500,0,2200,2000,0,10000,1250]\r\n\t\t\tppg_attackPaternDuration[98] = 1;\r\n\t\t\t\t\r\n\t\t\t//_______________ ATTACK PATERN _____________________________\r\n\r\n\r\n\t\t\targs = {};\r\n\t\t\targs.posx = 0;args.posy = 0;args.offsetx = 0;args.offsety = 0;args.width = 0;args.height = 0;args.speed = 0;args.direction = 0;args.directioniscircle = \"false\";args.sprite = \"null\";args.candie = \"true\";args.canbetouched = \"false\";args.isPlayerShot = \"false\";args.isBonus = \"false\";\r\n\t\t\t\t\t\r\n\t\t\targs.name = \"ppg_atk\";\r\n\t\t\targs.hp = ppg_attackPaternDuration[_this.ppg_attackPaternID];\r\n\t\t\targs.action = 4201 + _this.ppg_attackPaternID;\r\n\t\t\targs.deathaction = 50;\r\n\t\t\t\t\t\r\n\t\t\t_this.createBHObject(args)\r\n\t\t\t\r\n\t\t\targs.sprite = 'kingkong-hpbar';\r\n\t\t\targs.name = \"hpbar-static\";\r\n\t\t\targs.action = 'HP Bar';\r\n\t\t\targs.anchorx = 0;\r\n\t\t\targs.posx = _this.bhmaxwidth/2+628;\r\n\t\t\targs.posy = _this.bhmaxheight/2+639;\r\n\t\t\targs.zindex = 21;\r\n\t\t\t_this.createBHObject(args)\r\n\t\t\t\r\n\t\t\t_this.ppg_attackPaternID++;\r\n\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\tvar lastx = $gameVariables.value(83);\r\n\t\tvar lasty = $gameVariables.value(84);\r\n\t\t\r\n\t\t_this.playerCanShot = 1;\r\n\t\tif (_this.ppg_attackPaternID >= 99) {\r\n\t\t\t_this.playerTypeOfShot = 0;\r\n\t\t} else {\r\n\t\t\t_this.playerTypeOfShot = 1;\r\n\t\t}\r\n\t\t\r\n\t\tlet gravModifier = 1;\r\n\t\tif (_this.soulOnPlatform != 0) {\r\n\t\t\t$gameVariables.setValue(83, $gameVariables.value(83)+_this.soulOnPlatform);\r\n\t\t}\r\n\t\t\r\n\t\tif (_this.isBlueSoul) {\r\n\t\t\t\r\n\t\t\t_this.soulGravity -= 0.25*gravModifier;\r\n\t\t}\r\n\t\t\r\n\t\t$gameVariables.setValue(97, $gameVariables.value(97)-1)\r\n\t\t\r\n\t\tif ($gameVariables.value(97) < 0) {\r\n\t\t\t\r\n\t\t\t$gameVariables.setValue(97, 0)\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\r\n\t\t\t\r\n\t\t\tif ((Input.isPressed(\"up\") || Input.isPressed(\"ok\")) && _this.isBlueSoul && ((_this.soulJumpPower > 0 && _this.soulHasJump) || ((_this.soulJumpPower == 0 && Math.abs(_this.soulGravity) < 0.5) && !_this.soulHasJump))) {\r\n\t\t\t\t\r\n\t\t\t\t_this.soulHasJump = 1;\r\n\t\t\t\t\r\n\t\t\t\t_this.soulJumpPower = (_this.soulJumpPower == 0) ? 3 : _this.soulJumpPower;\r\n\t\t\t\t\r\n\t\t\t\t_this.soulJumpPower += 0.5*gravModifier;\r\n\t\t\t\tif (_this.soulJumpPower > 10*gravModifier) {\r\n\t\t\t\t\t\r\n\t\t\t\t\t_this.soulJumpPower = 10*gravModifier;\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\t\r\n\t\tif (Input.isPressed(\"up\") && !_this.isBlueSoul) {\r\n\t\t\t\r\n\t\t\t\tif (Input.isPressed(\"shift\")) {\r\n\t\t\t\t\t\r\n\t\t\t\t\t$gameVariables.setValue(84, $gameVariables.value(84)-2)\r\n\t\t\t\t\t\r\n\t\t\t\t} else {\r\n\t\t\t\t\t\r\n\t\t\t\t\t$gameVariables.setValue(84, $gameVariables.value(84)-5)\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tif (!Input.isPressed(\"up\") && !Input.isPressed(\"ok\")) {\r\n\t\t\t\r\n\t\t\t_this.soulHasJump = 0;\r\n\t\t\t\r\n\t\t}\r\n\r\n\t\tif (Input.isPressed(\"down\") && !_this.isBlueSoul) {\r\n\t\t\t\r\n\t\t\tif (Input.isPressed(\"shift\")) {\r\n\t\t\t\t\r\n\t\t\t\t$gameVariables.setValue(84, $gameVariables.value(84)+2)\r\n\t\t\t\t\r\n\t\t\t} else {\r\n\t\t\t\t\r\n\t\t\t\t$gameVariables.setValue(84, $gameVariables.value(84)+5)\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tif (Input.isPressed(\"left\")) {\r\n\t\t\t\r\n\t\t\tif (Input.isPressed(\"shift\")) {\r\n\t\t\t\t\r\n\t\t\t\t$gameVariables.setValue(83, $gameVariables.value(83)-2)\r\n\t\t\t\t\r\n\t\t\t} else {\r\n\t\t\t\t\r\n\t\t\t\t$gameVariables.setValue(83, $gameVariables.value(83)-5)\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\r\n\t\tif (Input.isPressed(\"right\")) {\r\n\t\t\t\r\n\t\t\tif (Input.isPressed(\"shift\")) {\r\n\t\t\t\t\r\n\t\t\t\t$gameVariables.setValue(83, $gameVariables.value(83)+2)\r\n\t\t\t\t\r\n\t\t\t} else {\r\n\t\t\t\t\r\n\t\t\t\t$gameVariables.setValue(83, $gameVariables.value(83)+5)\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\tif (_this.isBlueSoul) {\r\n\t\t\t$gameVariables.setValue(84, $gameVariables.value(84) - _this.soulGravity - _this.soulJumpPower);\r\n\t\t}\r\n\t\t\r\n\t\tlet leftBorder = 452-9;\r\n\t\tlet rightBorder = 1280-452-27;\r\n\t\tlet topBorder = 84-29-5;\r\n\t\tlet bottomBorder = 720-260-47-5;\r\n\t\t\r\n\t\tif (_this.ppg_attackPaternID == 99) {\r\n\t\t\t\r\n\t\t\tleftBorder = 452-9 - 300;\r\n\t\t\trightBorder = 1280-452-27 + 300;\r\n\t\t\ttopBorder = 428-29;\r\n\t\t\tbottomBorder = 720-40;\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tif (_this.ppg_attackPaternID == 100) {\r\n\t\t\t\r\n\t\t\tleftBorder = 9;\r\n\t\t\trightBorder = 1280-27;\r\n\t\t\ttopBorder = 29;\r\n\t\t\tbottomBorder = 720-40;\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tif ($gameVariables.value(83) < leftBorder) {\r\n\t\t\t\r\n\t\t\t$gameVariables.setValue(83,leftBorder);\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tif ($gameVariables.value(83) > rightBorder) {\r\n\t\t\t\r\n\t\t\t$gameVariables.setValue(83,rightBorder);\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tif ($gameVariables.value(84) < topBorder) {\r\n\t\t\t\r\n\t\t\t$gameVariables.setValue(84,topBorder);\r\n\t\t\tif (_this.isBlueSoul) {\r\n\t\t\t\t\r\n\t\t\t\t_this.soulGravity = 0;\r\n\t\t\t\t_this.soulJumpPower = 0;\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tif ($gameVariables.value(84) > bottomBorder) {\r\n\t\t\t\r\n\t\t\t$gameVariables.setValue(84,bottomBorder);\r\n\t\t\t\r\n\t\t\tif (_this.isBlueSoul) {\r\n\t\t\t\t\r\n\t\t\t\t_this.soulGravity = 0;\r\n\t\t\t\t_this.soulJumpPower = 0;\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t/*if (Input.isPressed(\"cancel\") && Input.isPressed(\"down\") && _this.plshot_timer <= 0) {\r\n\t\t\t\r\n\t\t\tcreateSmallPlatform(Math.random()*1280 + _this.bhmaxwidth/2, Math.random()*600 + 100, 1)\r\n\t\t\t_this.plshot_timer = 3;\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tif (Input.isPressed(\"cancel\") && Input.isPressed(\"up\") && _this.plshot_timer <= 0) {\r\n\t\t\t\r\n\t\t\tswapSoul()\r\n\t\t\t_this.plshot_timer = 30;\r\n\t\t\t\r\n\t\t}\r\n\r\n\r\n\t\tif (Input.isPressed(\"cancel\") && !Input.isPressed(\"up\") && _this.plshot_timer <= 0) {\r\n\t\t\t\r\n\t\t\t//createGasterBlaster(Math.random()*1280 + _this.bhmaxwidth/2, Math.random()*720 + _this.bhmaxheight/2, 20, 60)\r\n\t\t\t//createTopHatLetter(Math.random()*1280 + _this.bhmaxwidth/2,20,60)\r\n\t\t\t//createTopHatBunny(Math.random()*300 + _this.bhmaxheight/2,Math.floor(Math.random()*2),20,60)\r\n\t\t\t//createDoomFinalLaser(3,10000);\r\n\t\t\t//createInvertVortex(640,272,2,43,vorid)\r\n\r\n\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t_this.plshot_timer = 20;\r\n\t\t\t\r\n\t\t}*/\r\n\t\t\r\n\t\tif ($gameSwitches.value(517) == true) {\r\n\t\t\t\r\n\t\t\tAudioManager.playSe({name: 'Damage4', pan: 0, pitch: 150, volume: 90});\r\n\t\t\t$gameScreen.startFlash([255, 255, 255, 221], 20);\r\n\t\t\t$gameSwitches.setValue(517, false);\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\tif ($gameSwitches.value(514) == true) {\r\n\t\t\t\r\n\t\t\tplayerIsHit(1)\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\tif (lastx != $gameVariables.value(83) || lasty != $gameVariables.value(84)) {\r\n\t\t\t\r\n\t\t\t_this.playerHasMove = 1;\r\n\t\t\t\r\n\t\t} else {\r\n\t\t\t\r\n\t\t\t_this.playerHasMove = 0;\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tif (_this.ppg_stop) {\r\n\t\t\t_this.PlayerCollisionX1 = 0;\r\n\t\t\t_this.PlayerCollisionX2 = 0;\r\n\t\t\t_this.PlayerCollisionY1 = 0;\r\n\t\t\t_this.PlayerCollisionY2 = 0;\r\n\t\t\t$gameVariables.setValue(83, -50);\r\n\t\t\t$gameScreen.erasePicture(2);\r\n\t\t\t$gameScreen.erasePicture(4);\r\n\t\t\t_this.clearSpinningAttack();\r\n\t\t\t_this.ppg_action = 0;\r\n\t\t\tthisTurn.endAction();\r\n\t\t\tthisTurn._subject = null;\r\n\t\t\t$gameScreen.erasePicture(3);\r\n\t\t\t_this.objects = [];\r\n\t\t\tConfigManager[\"battleAniSpeed\"] = $tempAniSpeed;\r\n\t\t\t$tempAniSpeed = 0;\r\n\t\t\t_this.ppg_stop = 0;\r\n\t\t\t\r\n\t\t\tif (_this.ppg_attackPaternID == 100) {\r\n\t\t\t\t\r\n\t\t\t\tif (BattleManager.isBattleTest()) {\r\n\t\t\t\t\tAudioManager.stopBgm();\r\n\t\t\t\t\tSceneManager.exit();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tSceneManager.pop();\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t} else {\r\n\t\t\t\t\r\n\t\t\t\tAudioManager.playSe({name: 'ppg_noise', pan: 0, pitch: 100, volume: 100});\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}"},"PPG Battle":{"name":"PPG Battle","id":1,"load":" (thisTurn, _this, skillParam) {\r\n\t\r\n\tlet bgImage = \"ppg_attackbg\";\r\n\t\r\n\tif (skillParam > 0 ) {\r\n\t\r\n\t\t_this.ppg_attackPaternID = skillParam;\r\n\t\tbgImage = \"ppg_attackbgonly\";\r\n\t\r\n\t}\r\n\t\r\n\tif ($tempAniSpeed == 0) {\r\n\t\t$tempAniSpeed = ConfigManager[\"battleAniSpeed\"]\r\n\t}\r\n\tConfigManager[\"battleAniSpeed\"] = 0\r\n\r\n\r\n\tif (_this.ppg_attackPaternID == 15 && _this.ppg_attackPaternWillChange >= 1 && !$gameMessage.isBusy()) {\r\n\t\t\r\n\t\t_this.ppg_lastdialogue += 1;\r\n\t\t\r\n\t}\r\n\r\n\tif (_this.ppg_attackPaternID == 15 && _this.ppg_attackPaternWillChange >= 1 && _this.ppg_lastdialogue == 1) {\r\n\t\tAudioManager.playBgm({name: null, pan: 0, pitch: 100, volume: 100});\r\n\t\t$gameMessage.setFaceImage(\"Oujnish7\", 6);\r\n\t\t$gameMessage.setSpeakerName(\"Paper Professeur Genos\");\r\n\t\t$gameMessage.add(\"It's not over yet kid !\");\r\n\t}\r\n\t\r\n\tif (_this.ppg_attackPaternID == 15 && _this.ppg_attackPaternWillChange >= 1 && _this.ppg_lastdialogue == 2) {\r\n\t\t$gameMessage.setFaceImage(\"Oujnish7\", 6);\r\n\t\t$gameMessage.setSpeakerName(\"Paper Professeur Genos\");\r\n\t\t$gameMessage.add(\"You ascended beyond our control, I shall\");\r\n\t\t$gameMessage.add(\"demolish all of you.\");\r\n\t}\r\n\t\r\n\tif (_this.ppg_attackPaternID == 15 && _this.ppg_attackPaternWillChange >= 1 && _this.ppg_lastdialogue == 3) {\r\n\t\t$gameMessage.setFaceImage(\"Oujnish7\", 6);\r\n\t\t$gameMessage.setSpeakerName(\"Paper Professeur Genos\");\r\n\t\t$gameMessage.add(\"\");\r\n\t\t$gameMessage.add(\"\\\\n\\\\{Y o u   g o n n a   g o   t o   h e l l .\");\r\n\t}\r\n\t\r\n\tif (!$gameMessage.isBusy()) {\r\n\t\t\r\n\t\t// Do the actions\r\n\t\tif (_this.ppg_action == 0) {\r\n\t\t\t\r\n\t\t\t_this.active = true;\r\n\t\t\tppg_currentSubject = null;\r\n\t\t\t\r\n\t\t\tif ((_this.ppg_attackPaternWillChange >= 1 && _this.ppg_attackPaternID == 15) || _this.ppg_attackPaternID != 15) {\r\n\t\t\t\r\n\t\t\tif (_this.ppg_attackPaternID == 15) {\r\n\t\t\t\t\r\n\t\t\t\tAudioManager.playBgm({name: \"stained-brutal-genophobia\", pan: 0, pitch: 100, volume: 100});\r\n\t\t\t\t$ppgIsDead = 1;\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t_this.ppg_lastdialogue = 0;\r\n\t\t\t_this.soulDirection = 8;\r\n\t\t\t_this.plshot_timer = 2;\r\n\t\t\t_this.PlayerCollisionX1 = 10;\r\n\t\t\t_this.PlayerCollisionX2 = 24;\r\n\t\t\t_this.PlayerCollisionY1 = 37;\r\n\t\t\t_this.PlayerCollisionY2 = 52;\r\n\t\t\t$gameSwitches.setValue(514, false);\r\n\t\t\t\r\n\t\t\tAudioManager.playSe({name: 'ppg_noise', pan: 0, pitch: 100, volume: 100});\r\n\t\t\t\r\n\t\t\t_this.objects = [];\r\n\t\t\t_this.BHBitmap = new Bitmap(1280 + _this.bhmaxwidth,720 + _this.bhmaxheight);\r\n\t\t\t\r\n\t\t\tparams = [2, bgImage, 0, 0, 0, 0, 100, 100, 255, 0]\r\n\t\t\t\r\n\t\t\tlet point = Game_Interpreter.prototype.picturePoint.call(null, params);\r\n\t\t\t// prettier-ignore\r\n\t\t\t$gameScreen.showPicture(\r\n\t\t\t\tparams[0], params[1], params[2], point.x, point.y,\r\n\t\t\t\tparams[6], params[7], params[8], params[9]\r\n\t\t\t);\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t_this.ppg_action = 1;\r\n\t\t\t_this.showPictureBellow = 1;\r\n\t\t\tconst subject = thisTurn._subject;\r\n\t\t\tconst action = subject.currentAction();\r\n\t\t\t\r\n\t\t\tlet ppg_attackPaternDuration = [1000,1250,2000,1000,1250,10000,2000,2000,1500,15000,1250,20000,2200,2000,0,10000,1250]\r\n\r\n\t\t\t\t\r\n\t\t\t//_______________ ATTACK PATERN _____________________________\r\n\r\n\t\t\t\tif (_this.ppg_attackPaternID != 14) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tppg_attack15_timer = 0;\r\n\t\t\t\t\t\r\n\t\t\t\t\targs = {};\r\n\t\t\t\t\targs.posx = 0;args.posy = 0;args.offsetx = 0;args.offsety = 0;args.width = 0;args.height = 0;args.speed = 0;args.direction = 0;args.directioniscircle = \"false\";args.sprite = \"null\";args.candie = \"true\";args.canbetouched = \"false\";args.isPlayerShot = \"false\";args.isBonus = \"false\";\r\n\t\t\t\t\t\r\n\t\t\t\t\targs.name = \"ppg_atk\";\r\n\t\t\t\t\targs.hp = ppg_attackPaternDuration[_this.ppg_attackPaternID];\r\n\t\t\t\t\targs.action = 51 + _this.ppg_attackPaternID;\r\n\t\t\t\t\targs.deathaction = 50;\r\n\t\t\t\t\t\r\n\t\t\t\t\tMath.seedrandom('PPG_Seed' + _this.ppg_attackPaternID.toString())\r\n\t\t\t\t\t_this.createBHObject(args)\r\n\t\t\t\t\t\r\n\t\t\t\t} else {\r\n\t\t\t\t\t\r\n\t\t\t\t\tppg_attack15_timer = 3000;\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t//___________________________________________________________\t\r\n\r\n\t\t\tif (_this.ppg_attackPaternID == 999) {\r\n\t\t\t\t\r\n\t\t\t\tfor (k = 0;k < 21; k++) {\r\n\t\t\t\t\t\r\n\t\t\t\t\targs = {};\r\n\t\t\t\t\targs.posx = 0;args.posy = 0;args.offsetx = 0;args.offsety = 0;args.width = 0;args.height = 0;args.speed = 0;args.direction = 0;args.directioniscircle = \"false\";args.sprite = \"null\";args.candie = \"true\";args.canbetouched = \"false\";args.isPlayerShot = \"false\";args.isBonus = \"false\";\r\n\t\t\t\t\t\r\n\t\t\t\t\targs.name = \"ppg_atk\";\r\n\t\t\t\t\targs.hp = ppg_attackPaternDuration[k];\r\n\t\t\t\t\targs.action = 51 + k;\r\n\t\t\t\t\targs.deathaction = 50;\r\n\t\t\t\t\t\r\n\t\t\t\t\t_this.createBHObject(args)\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t} else {\r\n\t\t\t\t\r\n\t\t\t\t_this.PlayerCollisionX1 = 0;\r\n\t\t\t\t_this.PlayerCollisionX2 = 0;\r\n\t\t\t\t_this.PlayerCollisionY1 = 0;\r\n\t\t\t\t_this.PlayerCollisionY2 = 0;\r\n\t\t\t\t$gameVariables.setValue(83, -50);\r\n\t\t\t\t$gameScreen.erasePicture(2);\r\n\t\t\t\t$gameScreen.erasePicture(4);\r\n\t\t\t\t_this.clearSpinningAttack();\r\n\t\t\t\t_this.ppg_action = 0;\r\n\t\t\t\tthisTurn.endAction();\r\n\t\t\t\tthisTurn._subject = null;\r\n\t\t\t\tbhobjects = {object: new Array(0)};\r\n\t\t\t\t\r\n\t\t\t}\r\n\r\n\t\t\tif (_this.ppg_attackPaternWillChange >= 1) {\r\n\t\t\t\t_this.ppg_attackPaternID += 1;\r\n\t\t\t}\r\n\t\t\t_this.ppg_attackPaternWillChange = 0;\r\n\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\tvar lastx = $gameVariables.value(83);\r\n\t\tvar lasty = $gameVariables.value(84);\r\n\t\t\r\n\t\t_this.playerCanShot = 1;\r\n\t\t_this.playerTypeOfShot = 1;\r\n\t\t\r\n\t\t\r\n\t\tif (ppg_attack15_timer > 0 && ppg_attack15_timer % 600 == 0) {\r\n\t\t\t\r\n\t\t\tlet attack15pattern = [4,2,8,7,14]\r\n\t\t\t\r\n\t\t\t_this.clearSpinningAttack();\r\n\t\t\t\r\n\t\t\t_this.PlayerCollisionX1 = 10;\r\n\t\t\t_this.PlayerCollisionX2 = 24;\r\n\t\t\t_this.PlayerCollisionY1 = 37;\r\n\t\t\t_this.PlayerCollisionY2 = 52;\r\n\t\t\t\r\n\t\t\tAudioManager.playSe({name: 'ppg_noise', pan: 0, pitch: 100, volume: 100});\r\n\t\t\t_this.objects = [];\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tparams = [2, bgImage, 0, 0, 0, 0, 100, 100, 255, 0]\r\n\t\t\t\r\n\t\t\tpoint = Game_Interpreter.prototype.picturePoint.call(null, params);\r\n\t\t\t// prettier-ignore\r\n\t\t\t$gameScreen.showPicture(\r\n\t\t\t\tparams[0], params[1], params[2], point.x, point.y,\r\n\t\t\t\tparams[6], params[7], params[8], params[9]\r\n\t\t\t);\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\t\targs = {};\r\n\t\t\t\t\targs.posx = 0;args.posy = 0;args.offsetx = 0;args.offsety = 0;args.width = 0;args.height = 0;args.speed = 0;args.direction = 0;args.directioniscircle = \"false\";args.sprite = \"null\";args.candie = \"true\";args.canbetouched = \"false\";args.isPlayerShot = \"false\";args.isBonus = \"false\";\r\n\t\t\t\t\t\r\n\t\t\t\t\targs.name = \"ppg_atk\";\r\n\t\t\t\t\targs.hp = 1200;\r\n\t\t\t\t\targs.action = 51 + attack15pattern[5 - (ppg_attack15_timer/600)];\r\n\t\t\t\t\targs.deathaction = 50;\r\n\t\t\t\t\t\r\n\t\t\t\t\t_this.createBHObject(args)\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tppg_attack15_timer -= 1;\r\n\t\t\r\n\t\tlet gravModifier = 1;\r\n\t\tif (_this.soulOnPlatform != 0) {\r\n\t\t\t$gameVariables.setValue(83, $gameVariables.value(83)+_this.soulOnPlatform);\r\n\t\t}\r\n\t\t\r\n\t\tif (_this.isBlueSoul) {\r\n\t\t\t\r\n\t\t\t_this.soulGravity -= 0.25*gravModifier;\r\n\t\t}\r\n\t\t\r\n\t\t$gameVariables.setValue(97, $gameVariables.value(97)-1)\r\n\t\t\r\n\t\tif ($gameVariables.value(97) < 0) {\r\n\t\t\t\r\n\t\t\t$gameVariables.setValue(97, 0)\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\r\n\t\t\t\r\n\t\t\tif ((Input.isPressed(\"up\") || Input.isPressed(\"ok\")) && _this.isBlueSoul && ((_this.soulJumpPower > 0 && _this.soulHasJump) || ((_this.soulJumpPower == 0 && Math.abs(_this.soulGravity) < 0.5) && !_this.soulHasJump))) {\r\n\t\t\t\t\r\n\t\t\t\t_this.soulHasJump = 1;\r\n\t\t\t\t\r\n\t\t\t\t_this.soulJumpPower = (_this.soulJumpPower == 0) ? 3 : _this.soulJumpPower;\r\n\t\t\t\t\r\n\t\t\t\t_this.soulJumpPower += 0.5*gravModifier;\r\n\t\t\t\tif (_this.soulJumpPower > 10*gravModifier) {\r\n\t\t\t\t\t\r\n\t\t\t\t\t_this.soulJumpPower = 10*gravModifier;\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\t\r\n\t\tif (Input.isPressed(\"up\") && !_this.isBlueSoul) {\r\n\t\t\t\r\n\t\t\t\tif (Input.isPressed(\"shift\")) {\r\n\t\t\t\t\t\r\n\t\t\t\t\t$gameVariables.setValue(84, $gameVariables.value(84)-2)\r\n\t\t\t\t\t\r\n\t\t\t\t} else {\r\n\t\t\t\t\t\r\n\t\t\t\t\t$gameVariables.setValue(84, $gameVariables.value(84)-5)\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tif (!Input.isPressed(\"up\") && !Input.isPressed(\"ok\")) {\r\n\t\t\t\r\n\t\t\t_this.soulHasJump = 0;\r\n\t\t\t\r\n\t\t}\r\n\r\n\t\tif (Input.isPressed(\"down\") && !_this.isBlueSoul) {\r\n\t\t\t\r\n\t\t\tif (Input.isPressed(\"shift\")) {\r\n\t\t\t\t\r\n\t\t\t\t$gameVariables.setValue(84, $gameVariables.value(84)+2)\r\n\t\t\t\t\r\n\t\t\t} else {\r\n\t\t\t\t\r\n\t\t\t\t$gameVariables.setValue(84, $gameVariables.value(84)+5)\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tif (Input.isPressed(\"left\")) {\r\n\t\t\t\r\n\t\t\tif (Input.isPressed(\"shift\")) {\r\n\t\t\t\t\r\n\t\t\t\t$gameVariables.setValue(83, $gameVariables.value(83)-2)\r\n\t\t\t\t\r\n\t\t\t} else {\r\n\t\t\t\t\r\n\t\t\t\t$gameVariables.setValue(83, $gameVariables.value(83)-5)\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\r\n\t\tif (Input.isPressed(\"right\")) {\r\n\t\t\t\r\n\t\t\tif (Input.isPressed(\"shift\")) {\r\n\t\t\t\t\r\n\t\t\t\t$gameVariables.setValue(83, $gameVariables.value(83)+2)\r\n\t\t\t\t\r\n\t\t\t} else {\r\n\t\t\t\t\r\n\t\t\t\t$gameVariables.setValue(83, $gameVariables.value(83)+5)\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\tif (_this.isBlueSoul) {\r\n\t\t\t$gameVariables.setValue(84, $gameVariables.value(84) - _this.soulGravity - _this.soulJumpPower);\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\tif ($gameVariables.value(83) < 452-9) {\r\n\t\t\t\r\n\t\t\t$gameVariables.setValue(83,452-9);\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tif ($gameVariables.value(83) > 1280-452-27) {\r\n\t\t\t\r\n\t\t\t$gameVariables.setValue(83,1280-452-27);\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tif ($gameVariables.value(84) < 84-29-5) {\r\n\t\t\t\r\n\t\t\t$gameVariables.setValue(84,84-29-5);\r\n\t\t\tif (_this.isBlueSoul) {\r\n\t\t\t\t\r\n\t\t\t\t_this.soulGravity = 0;\r\n\t\t\t\t_this.soulJumpPower = 0;\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tif ($gameVariables.value(84) > 720-260-47-5) {\r\n\t\t\t\r\n\t\t\t$gameVariables.setValue(84,720-260-47-5);\r\n\t\t\t\r\n\t\t\tif (_this.isBlueSoul) {\r\n\t\t\t\t\r\n\t\t\t\t_this.soulGravity = 0;\r\n\t\t\t\t_this.soulJumpPower = 0;\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t/*if (Input.isPressed(\"cancel\") && Input.isPressed(\"down\") && _this.plshot_timer <= 0) {\r\n\t\t\t\r\n\t\t\tcreateSmallPlatform(Math.random()*1280 + _this.bhmaxwidth/2, Math.random()*600 + 100, 1)\r\n\t\t\t_this.plshot_timer = 3;\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tif (Input.isPressed(\"cancel\") && Input.isPressed(\"up\") && _this.plshot_timer <= 0) {\r\n\t\t\t\r\n\t\t\tswapSoul()\r\n\t\t\t_this.plshot_timer = 30;\r\n\t\t\t\r\n\t\t}\r\n\r\n\r\n\t\tif (Input.isPressed(\"cancel\") && !Input.isPressed(\"up\") && _this.plshot_timer <= 0) {\r\n\t\t\t\r\n\t\t\t//createGasterBlaster(Math.random()*1280 + _this.bhmaxwidth/2, Math.random()*720 + _this.bhmaxheight/2, 20, 60)\r\n\t\t\t//createTopHatLetter(Math.random()*1280 + _this.bhmaxwidth/2,20,60)\r\n\t\t\t//createTopHatBunny(Math.random()*300 + _this.bhmaxheight/2,Math.floor(Math.random()*2),20,60)\r\n\t\t\t//createDoomFinalLaser(3,10000);\r\n\t\t\t//createInvertVortex(640,272,2,43,vorid)\r\n\r\n\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t_this.plshot_timer = 20;\r\n\t\t\t\r\n\t\t}*/\r\n\t\t\r\n\t\tif ($gameSwitches.value(517) == true) {\r\n\t\t\t\r\n\t\t\tAudioManager.playSe({name: 'Damage4', pan: 0, pitch: 150, volume: 90});\r\n\t\t\t$gameScreen.startFlash([255, 255, 255, 221], 20);\r\n\t\t\t$gameSwitches.setValue(517, false);\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\tif ($gameSwitches.value(516) == true) {\r\n\t\t\t\r\n\t\t\tAudioManager.playSe({name: 'Heal2', pan: 0, pitch: 150, volume: 90});\r\n\t\t\t$gameScreen.startFlash([119, 255, 119, 221], 20);\r\n\t\t\t$gameVariables.setValue(71, $gameVariables.value(83) + 17);\r\n\t\t\t$gameVariables.setValue(72, $gameVariables.value(84) + 31);\r\n\t\t\t\r\n\t\t\tPluginManager.callCommand(thisTurn, 'TextPicture', 'set', {\r\n\t\t\t  text: \"\\\\c[4]+\\\\V[95]XP\"\r\n\t\t\t});\r\n\t\r\n\t\t\tparams = [56, \"\", 1, 1, 71, 72, 100, 100, 255, 0]\r\n\t\t\t\r\n\t\t\tpoint = Game_Interpreter.prototype.picturePoint.call(null, params);\r\n\t\t\t// prettier-ignore\r\n\t\t\t$gameScreen.showPicture(\r\n\t\t\t\tparams[0], params[1], params[2], point.x, point.y,\r\n\t\t\t\tparams[6], params[7], params[8], params[9]\r\n\t\t\t);\r\n\t\t\t\r\n\t\t\t$gameVariables.setValue(72,$gameVariables.value(72) -100);\r\n\t\t\t\r\n\t\t\tparams = [56, 0, 1, 1, 71, 72, 100, 100, 0, 0, 60, false, 0]\r\n\t\t\t\r\n\t\t\tpoint = Game_Interpreter.prototype.picturePoint.call(null, params);\r\n\t\t\t\r\n\t\t\t$gameScreen.movePicture(\r\n\t\t\t\tparams[0], params[2], point.x, point.y, params[6], params[7],\r\n\t\t\t\tparams[8], params[9], params[10], params[12] || 0\r\n\t\t\t);\r\n\t\t\tif (params[11]) {\r\n\t\t\t\tthisTurn.wait(params[10]);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t$gameSwitches.setValue(516, false);\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\tif ($gameSwitches.value(514) == true) {\r\n\t\t\t\r\n\t\t\tplayerIsHit(1)\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\tif (lastx != $gameVariables.value(83) || lasty != $gameVariables.value(84)) {\r\n\t\t\t\r\n\t\t\t_this.playerHasMove = 1;\r\n\t\t\t\r\n\t\t} else {\r\n\t\t\t\r\n\t\t\t_this.playerHasMove = 0;\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tif (_this.ppg_stop) {\r\n\t\t\t_this.PlayerCollisionX1 = 0;\r\n\t\t\t_this.PlayerCollisionX2 = 0;\r\n\t\t\t_this.PlayerCollisionY1 = 0;\r\n\t\t\t_this.PlayerCollisionY2 = 0;\r\n\t\t\t$gameVariables.setValue(83, -50);\r\n\t\t\t$gameScreen.erasePicture(2);\r\n\t\t\t$gameScreen.erasePicture(4);\r\n\t\t\t_this.clearSpinningAttack();\r\n\t\t\tAudioManager.playSe({name: 'ppg_noise', pan: 0, pitch: 100, volume: 100});\r\n\t\t\t_this.ppg_action = 0;\r\n\t\t\tthisTurn.endAction();\r\n\t\t\tthisTurn._subject = null;\r\n\t\t\t$gameScreen.erasePicture(3);\r\n\t\t\t_this.objects = [];\r\n\t\t\tConfigManager[\"battleAniSpeed\"] = $tempAniSpeed;\r\n\t\t\t$tempAniSpeed = 0;\r\n\t\t\t_this.ppg_stop = 0;\r\n\t\t}\r\n\t}\r\n}"},"PPG Ultimate":{"name":"PPG Ultimate","id":1,"load":" (thisTurn, _this, skillParam) {\r\n\t\r\n\tlet bgImage = \"ppg_attackbg\";\r\n\t\r\n\tif (skillParam > 0 ) {\r\n\t\r\n\t\t_this.ppg_attackPaternID = skillParam;\r\n\t\r\n\t}\r\n\t\r\n\tif ($tempAniSpeed == 0) {\r\n\t\t$tempAniSpeed = ConfigManager[\"battleAniSpeed\"]\r\n\t}\r\n\tConfigManager[\"battleAniSpeed\"] = 0\r\n\t\t\r\n\t\t// Do the actions\r\n\t\tif (_this.ppg_action == 0) {\r\n\t\t\t\r\n\t\t\t_this.active = true;\r\n\t\t\tppg_currentSubject = null;\r\n\t\t\t\r\n\t\t\t_this.soulDirection = 8;\r\n\t\t\t_this.plshot_timer = 2;\r\n\t\t\t_this.PlayerCollisionX1 = 10;\r\n\t\t\t_this.PlayerCollisionX2 = 24;\r\n\t\t\t_this.PlayerCollisionY1 = 37;\r\n\t\t\t_this.PlayerCollisionY2 = 52;\r\n\t\t\t$gameSwitches.setValue(514, false);\r\n\t\t\t\r\n\t\t\tAudioManager.playSe({name: 'ppg_noise', pan: 0, pitch: 100, volume: 100});\r\n\t\t\t\r\n\t\t\t_this.objects = [];\r\n\t\t\t_this.BHBitmap = new Bitmap(1280 + _this.bhmaxwidth,720 + _this.bhmaxheight);\r\n\t\t\t\r\n\t\t\tparams = [2, bgImage, 0, 0, 0, 0, 100, 100, 255, 0]\r\n\t\t\t\r\n\t\t\tlet point = Game_Interpreter.prototype.picturePoint.call(null, params);\r\n\t\t\t// prettier-ignore\r\n\t\t\t$gameScreen.showPicture(\r\n\t\t\t\tparams[0], params[1], params[2], point.x, point.y,\r\n\t\t\t\tparams[6], params[7], params[8], params[9]\r\n\t\t\t);\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t_this.ppg_action = 1;\r\n\t\t\t_this.showPictureBellow = 1;\r\n\t\t\tconst subject = thisTurn._subject;\r\n\t\t\tconst action = subject.currentAction();\r\n\r\n\t\t\t\t\r\n\t\t\t//_______________ ATTACK PATERN _____________________________\r\n\r\n\t\t\t\t\targs = {};\r\n\t\t\t\t\targs.posx = 0;args.posy = 0;args.offsetx = 0;args.offsety = 0;args.width = 0;args.height = 0;args.speed = 0;args.direction = 0;args.directioniscircle = \"false\";args.sprite = \"null\";args.candie = \"true\";args.canbetouched = \"false\";args.isPlayerShot = \"false\";args.isBonus = \"false\";\r\n\t\t\t\t\t\r\n\t\t\t\t\targs.name = \"ppg_atk\";\r\n\t\t\t\t\targs.hp = 3000;\r\n\t\t\t\t\targs.action = 130 + _this.ppg_attackPaternID;\r\n\t\t\t\t\targs.deathaction = 130;\r\n\t\t\t\t\t\r\n\t\t\t\t\t_this.createBHObject(args)\r\n\r\n\r\n\t\t\t//___________________________________________________________\t\r\n\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\tvar lastx = $gameVariables.value(83);\r\n\t\tvar lasty = $gameVariables.value(84);\r\n\t\t\r\n\t\t_this.playerCanShot = 1;\r\n\t\t\r\n\t\tif (_this.ppg_attackPaternID == 2) {\r\n\t\t\t_this.playerTypeOfShot = 0;\r\n\t\t} else {\r\n\t\t\t_this.playerTypeOfShot = 1;\r\n\t\t}\r\n\t\t\r\n\t\tlet gravModifier = 1;\r\n\t\tif (_this.soulOnPlatform != 0) {\r\n\t\t\t$gameVariables.setValue(83, $gameVariables.value(83)+_this.soulOnPlatform);\r\n\t\t}\r\n\t\t\r\n\t\tif (_this.isBlueSoul) {\r\n\t\t\t\r\n\t\t\t_this.soulGravity -= 0.25*gravModifier;\r\n\t\t}\r\n\t\t\r\n\t\t$gameVariables.setValue(97, $gameVariables.value(97)-1)\r\n\t\t\r\n\t\tif ($gameVariables.value(97) < 0) {\r\n\t\t\t\r\n\t\t\t$gameVariables.setValue(97, 0)\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\r\n\t\t\t\r\n\t\t\tif ((Input.isPressed(\"up\") || Input.isPressed(\"ok\")) && _this.isBlueSoul && ((_this.soulJumpPower > 0 && _this.soulHasJump) || ((_this.soulJumpPower == 0 && Math.abs(_this.soulGravity) < 0.5) && !_this.soulHasJump))) {\r\n\t\t\t\t\r\n\t\t\t\t_this.soulHasJump = 1;\r\n\t\t\t\t\r\n\t\t\t\t_this.soulJumpPower = (_this.soulJumpPower == 0) ? 3 : _this.soulJumpPower;\r\n\t\t\t\t\r\n\t\t\t\t_this.soulJumpPower += 0.5*gravModifier;\r\n\t\t\t\tif (_this.soulJumpPower > 10*gravModifier) {\r\n\t\t\t\t\t\r\n\t\t\t\t\t_this.soulJumpPower = 10*gravModifier;\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\t\r\n\t\tif (Input.isPressed(\"up\") && !_this.isBlueSoul) {\r\n\t\t\t\r\n\t\t\t\tif (Input.isPressed(\"shift\")) {\r\n\t\t\t\t\t\r\n\t\t\t\t\t$gameVariables.setValue(84, $gameVariables.value(84)-2)\r\n\t\t\t\t\t\r\n\t\t\t\t} else {\r\n\t\t\t\t\t\r\n\t\t\t\t\t$gameVariables.setValue(84, $gameVariables.value(84)-5)\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tif (!Input.isPressed(\"up\") && !Input.isPressed(\"ok\")) {\r\n\t\t\t\r\n\t\t\t_this.soulHasJump = 0;\r\n\t\t\t\r\n\t\t}\r\n\r\n\t\tif (Input.isPressed(\"down\") && !_this.isBlueSoul) {\r\n\t\t\t\r\n\t\t\tif (Input.isPressed(\"shift\")) {\r\n\t\t\t\t\r\n\t\t\t\t$gameVariables.setValue(84, $gameVariables.value(84)+2)\r\n\t\t\t\t\r\n\t\t\t} else {\r\n\t\t\t\t\r\n\t\t\t\t$gameVariables.setValue(84, $gameVariables.value(84)+5)\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tif (Input.isPressed(\"left\")) {\r\n\t\t\t\r\n\t\t\tif (Input.isPressed(\"shift\")) {\r\n\t\t\t\t\r\n\t\t\t\t$gameVariables.setValue(83, $gameVariables.value(83)-2)\r\n\t\t\t\t\r\n\t\t\t} else {\r\n\t\t\t\t\r\n\t\t\t\t$gameVariables.setValue(83, $gameVariables.value(83)-5)\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\r\n\t\tif (Input.isPressed(\"right\")) {\r\n\t\t\t\r\n\t\t\tif (Input.isPressed(\"shift\")) {\r\n\t\t\t\t\r\n\t\t\t\t$gameVariables.setValue(83, $gameVariables.value(83)+2)\r\n\t\t\t\t\r\n\t\t\t} else {\r\n\t\t\t\t\r\n\t\t\t\t$gameVariables.setValue(83, $gameVariables.value(83)+5)\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\tif (_this.isBlueSoul) {\r\n\t\t\t$gameVariables.setValue(84, $gameVariables.value(84) - _this.soulGravity - _this.soulJumpPower);\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\tif ($gameVariables.value(83) < 452-9) {\r\n\t\t\t\r\n\t\t\t$gameVariables.setValue(83,452-9);\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tif ($gameVariables.value(83) > 1280-452-27) {\r\n\t\t\t\r\n\t\t\t$gameVariables.setValue(83,1280-452-27);\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tif ($gameVariables.value(84) < 84-29-5) {\r\n\t\t\t\r\n\t\t\t$gameVariables.setValue(84,84-29-5);\r\n\t\t\tif (_this.isBlueSoul) {\r\n\t\t\t\t\r\n\t\t\t\t_this.soulGravity = 0;\r\n\t\t\t\t_this.soulJumpPower = 0;\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tif ($gameVariables.value(84) > 720-260-47-5) {\r\n\t\t\t\r\n\t\t\t$gameVariables.setValue(84,720-260-47-5);\r\n\t\t\t\r\n\t\t\tif (_this.isBlueSoul) {\r\n\t\t\t\t\r\n\t\t\t\t_this.soulGravity = 0;\r\n\t\t\t\t_this.soulJumpPower = 0;\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\tif ($gameSwitches.value(517) == true) {\r\n\t\t\t\r\n\t\t\tAudioManager.playSe({name: 'Damage4', pan: 0, pitch: 150, volume: 90});\r\n\t\t\t$gameScreen.startFlash([255, 255, 255, 221], 20);\r\n\t\t\t$gameSwitches.setValue(517, false);\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\tif ($gameSwitches.value(514) == true) {\r\n\t\t\t\r\n\t\t\tplayerIsHit(1)\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\tif (lastx != $gameVariables.value(83) || lasty != $gameVariables.value(84)) {\r\n\t\t\t\r\n\t\t\t_this.playerHasMove = 1;\r\n\t\t\t\r\n\t\t} else {\r\n\t\t\t\r\n\t\t\t_this.playerHasMove = 0;\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tif (_this.ppg_stop || _this.objects[0].hp <= 80 || _this.ppg_attackPaternID == 3) {\r\n\t\t\t\r\n\t\t\t$gameVariables.setValue(83,1280/2-47-5)\r\n\t\t\t$gameVariables.setValue(84,-9000-47-5)\r\n\t\t\t_this.playerCanShot = 0;\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\tif (_this.ppg_stop) {\r\n\t\t\t_this.PlayerCollisionX1 = 0;\r\n\t\t\t_this.PlayerCollisionX2 = 0;\r\n\t\t\t_this.PlayerCollisionY1 = 0;\r\n\t\t\t_this.PlayerCollisionY2 = 0;\r\n\t\t\t$gameVariables.setValue(83, -50);\r\n\t\t\t$gameScreen.erasePicture(2);\r\n\t\t\t$gameScreen.erasePicture(4);\r\n\t\t\t_this.clearSpinningAttack();\r\n\t\t\tAudioManager.playSe({name: 'ppg_noise', pan: 0, pitch: 100, volume: 100});\r\n\t\t\t_this.ppg_action = 0;\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tconst subject = thisTurn._subject;\r\n\t\t\tconst action = subject.currentAction();\r\n\t\t\tconst targets = action.makeTargets();\r\n\t\t\taction.ppgDamage = _this.damageValue;\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t_BattleManager_processTurn.call(thisTurn);\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t_this.damageValue = null;\r\n\t\t\t$gameScreen.erasePicture(3);\r\n\t\t\t_this.objects = [];\r\n\t\t\tConfigManager[\"battleAniSpeed\"] = $tempAniSpeed;\r\n\t\t\t$tempAniSpeed = 0;\r\n\t\t\t_this.ppg_stop = 0;\r\n\t\t}\r\n}"},"Teh Fedof Battle":{"name":"Teh Fedof Battle","id":2,"load":" (thisTurn, _this, skillParam) {\r\n\tif ($tempAniSpeed == 0) {\r\n\t\t$tempAniSpeed = ConfigManager[\"battleAniSpeed\"]\r\n\t}\r\n\tConfigManager[\"battleAniSpeed\"] = 0\r\n\r\n\r\n\tif (_this.ppg_attackPaternID == 15 && !$gameMessage.isBusy()) {\r\n\t\t\r\n\t\t_this.ppg_lastdialogue += 1;\r\n\t\t\r\n\t}\r\n\r\n\tif (_this.ppg_attackPaternID == 15 && _this.ppg_lastdialogue == 1) {\r\n\t\tAudioManager.playBgm({name: null, pan: 0, pitch: 100, volume: 100});\r\n\t\t$gameMessage.setFaceImage(\"Oujnish7\", 6);\r\n\t\t$gameMessage.setSpeakerName(\"Paper Professeur Genos\");\r\n\t\t$gameMessage.add(\"It's not over yet kid !\");\r\n\t}\r\n\t\r\n\tif (_this.ppg_attackPaternID == 15 && _this.ppg_lastdialogue == 2) {\r\n\t\t$gameMessage.setFaceImage(\"Oujnish7\", 6);\r\n\t\t$gameMessage.setSpeakerName(\"Paper Professeur Genos\");\r\n\t\t$gameMessage.add(\"You ascended beyond our control, I shall\");\r\n\t\t$gameMessage.add(\"demolish all of you.\");\r\n\t}\r\n\t\r\n\tif (_this.ppg_attackPaternID == 15 && _this.ppg_lastdialogue == 3) {\r\n\t\t$gameMessage.setFaceImage(\"Oujnish7\", 6);\r\n\t\t$gameMessage.setSpeakerName(\"Paper Professeur Genos\");\r\n\t\t$gameMessage.add(\"\");\r\n\t\t$gameMessage.add(\"\\\\n\\\\{Y o u   g o n n a   g o   t o   h e l l .\");\r\n\t}\r\n\t\r\n\tif (!$gameMessage.isBusy()) {\r\n\t\t\r\n\t\t\r\n\t\tif (SceneManager._scene._enemyWindow._enemies[0].hp == 0) {\r\n\t\t\t_this.ppg_stop = 1;\r\n\t\t}\r\n\t\t\r\n\t\t// Do the actions\r\n\t\tif (_this.ppg_action == 0) {\r\n\t\t\t\r\n\t\t\t_this.active = true;\r\n\t\t\tppg_currentSubject = null;\r\n\t\t\t\r\n\t\t\tif ((_this.ppg_attackPaternID == 15) || _this.ppg_attackPaternID < 15) {\r\n\t\t\t\r\n\t\t\tif (_this.ppg_attackPaternID == 15) {\r\n\t\t\t\t\r\n\t\t\t\tAudioManager.playBgm({name: \"stained-brutal-genophobia\", pan: 0, pitch: 100, volume: 100});\r\n\t\t\t\t$ppgIsDead = 1;\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t_this.ppg_lastdialogue = 0;\r\n\t\t\t_this.soulDirection = 8;\r\n\t\t\t_this.plshot_timer = 2;\r\n\t\t\t_this.PlayerCollisionX1 = 10;\r\n\t\t\t_this.PlayerCollisionX2 = 24;\r\n\t\t\t_this.PlayerCollisionY1 = 37;\r\n\t\t\t_this.PlayerCollisionY2 = 52;\r\n\t\t\t$gameSwitches.setValue(514, false);\r\n\t\t\t\r\n\t\t\tAudioManager.playSe({name: 'Teh Fedof Laugh', pan: 0, pitch: 100, volume: 200});\r\n\t\t\tAudioManager.playSe({name: 'ppg_noise', pan: 0, pitch: 100, volume: 100});\r\n\t\t\t\r\n\t\t\t_this.objects = [];\r\n\t\t\t_this.BHBitmap = new Bitmap(1280 + _this.bhmaxwidth,720 + _this.bhmaxheight);\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tif (_this.ppg_attackPaternID != 5) {\r\n\t\t\t\tparams = [2, \"tf_attackbg\", 0, 0, 0, 0, 100, 100, 255, 0]\r\n\t\t\t\t\r\n\t\t\t\tlet point = Game_Interpreter.prototype.picturePoint.call(null, params);\r\n\t\t\t\t// prettier-ignore\r\n\t\t\t\t$gameScreen.showPicture(\r\n\t\t\t\t\tparams[0], params[1], params[2], point.x, point.y,\r\n\t\t\t\t\tparams[6], params[7], params[8], params[9]\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t_this.ppg_action = 1;\r\n\t\t\t_this.showPictureBellow = 1;\r\n\t\t\tconst subject = thisTurn._subject;\r\n\t\t\tconst action = subject.currentAction();\r\n\t\t\t\r\n\t\t\tlet ppg_attackPaternDuration = [1000,1250,2000,2000,10000,1]\r\n\r\n\t\t\t\t\r\n\t\t\t//_______________ ATTACK PATERN _____________________________\r\n\r\n\t\t\t\tif (_this.ppg_attackPaternID != 14) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tppg_attack15_timer = 0;\r\n\r\n\t\t\t\t\targs = {};\r\n\t\t\t\t\targs.posx = 0;args.posy = 0;args.offsetx = 0;args.offsety = 0;args.width = 0;args.height = 0;args.speed = 0;args.direction = 0;args.directioniscircle = \"false\";args.sprite = \"null\";args.candie = \"true\";args.canbetouched = \"false\";args.isPlayerShot = \"false\";args.isBonus = \"false\";\r\n\t\t\t\t\t\r\n\t\t\t\t\targs.name = \"ppg_atk\";\r\n\t\t\t\t\targs.hp = ppg_attackPaternDuration[_this.ppg_attackPaternID];\r\n\t\t\t\t\targs.action = 701 + _this.ppg_attackPaternID;\r\n\t\t\t\t\targs.deathaction = 700;\r\n\t\t\t\t\t\r\n\t\t\t\t\t_this.createBHObject(args)\r\n\t\t\t\t\t\r\n\t\t\t\t} else {\r\n\t\t\t\t\t\r\n\t\t\t\t\tppg_attack15_timer = 5400;\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t//___________________________________________________________\t\r\n\r\n\t\t\tif (_this.ppg_attackPaternID == 999) {\r\n\t\t\t\t\r\n\t\t\t\tfor (k = 0;k < 21; k++) {\r\n\t\t\t\t\t\r\n\t\t\t\t\targs = {};\r\n\t\t\t\t\targs.posx = 0;args.posy = 0;args.offsetx = 0;args.offsety = 0;args.width = 0;args.height = 0;args.speed = 0;args.direction = 0;args.directioniscircle = \"false\";args.sprite = \"null\";args.candie = \"true\";args.canbetouched = \"false\";args.isPlayerShot = \"false\";args.isBonus = \"false\";\r\n\t\t\t\t\t\r\n\t\t\t\t\targs.name = \"ppg_atk\";\r\n\t\t\t\t\targs.hp = ppg_attackPaternDuration[k];\r\n\t\t\t\t\targs.action = 701 + k;\r\n\t\t\t\t\targs.deathaction = 700;\r\n\t\t\t\t\t\r\n\t\t\t\t\t_this.createBHObject(args)\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t} else {\r\n\t\t\t\t\r\n\t\t\t\t_this.PlayerCollisionX1 = 0;\r\n\t\t\t\t_this.PlayerCollisionX2 = 0;\r\n\t\t\t\t_this.PlayerCollisionY1 = 0;\r\n\t\t\t\t_this.PlayerCollisionY2 = 0;\r\n\t\t\t\t$gameVariables.setValue(83, -50);\r\n\t\t\t\t$gameScreen.erasePicture(2);\r\n\t\t\t\t$gameScreen.erasePicture(4);\r\n\t\t\t\t_this.clearSpinningAttack();\r\n\t\t\t\t_this.ppg_action = 0;\r\n\t\t\t\tthisTurn.endAction();\r\n\t\t\t\tthisTurn._subject = null;\r\n\t\t\t\tbhobjects = {object: new Array(0)};\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\tif (_this.ppg_attackPaternID != 5) {\r\n\t\t\t\t_this.ppg_attackPaternID = Math.floor(Math.random()*5);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\tvar lastx = $gameVariables.value(83);\r\n\t\tvar lasty = $gameVariables.value(84);\r\n\t\t\r\n\t\t_this.playerCanShot = 1;\r\n\t\t_this.playerTypeOfShot = 1;\r\n\t\t\r\n\t\t\r\n\t\tif (ppg_attack15_timer > 0 && ppg_attack15_timer % 600 == 0) {\r\n\t\t\t\r\n\t\t\tlet attack15pattern = [2,0,1,2,4,7,0,1,15]\r\n\t\t\t\r\n\t\t\t_this.clearSpinningAttack();\r\n\t\t\t\r\n\t\t\t_this.PlayerCollisionX1 = 10;\r\n\t\t\t_this.PlayerCollisionX2 = 24;\r\n\t\t\t_this.PlayerCollisionY1 = 37;\r\n\t\t\t_this.PlayerCollisionY2 = 52;\r\n\t\t\t\r\n\t\t\tAudioManager.playSe({name: 'ppg_noise', pan: 0, pitch: 100, volume: 100});\r\n\t\t\t_this.objects = [];\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tparams = [2, \"tf_attackbg\", 0, 0, 0, 0, 100, 100, 255, 0]\r\n\t\t\t\r\n\t\t\tpoint = Game_Interpreter.prototype.picturePoint.call(null, params);\r\n\t\t\t// prettier-ignore\r\n\t\t\t$gameScreen.showPicture(\r\n\t\t\t\tparams[0], params[1], params[2], point.x, point.y,\r\n\t\t\t\tparams[6], params[7], params[8], params[9]\r\n\t\t\t);\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\t\targs = {};\r\n\t\t\t\t\targs.posx = 0;args.posy = 0;args.offsetx = 0;args.offsety = 0;args.width = 0;args.height = 0;args.speed = 0;args.direction = 0;args.directioniscircle = \"false\";args.sprite = \"null\";args.candie = \"true\";args.canbetouched = \"false\";args.isPlayerShot = \"false\";args.isBonus = \"false\";\r\n\t\t\t\t\t\r\n\t\t\t\t\targs.name = \"ppg_atk\";\r\n\t\t\t\t\targs.hp = 10000;\r\n\t\t\t\t\targs.action = 701 + attack15pattern[9 - (ppg_attack15_timer/600)];\r\n\t\t\t\t\targs.deathaction = 50;\r\n\t\t\t\t\t\r\n\t\t\t\t\t_this.createBHObject(args)\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tppg_attack15_timer -= 1;\r\n\t\t\r\n\t\tlet gravModifier = 1;\r\n\t\tif (_this.soulOnPlatform != 0) {\r\n\t\t\t$gameVariables.setValue(83, $gameVariables.value(83)+_this.soulOnPlatform);\r\n\t\t}\r\n\t\t\r\n\t\tif (_this.isBlueSoul) {\r\n\t\t\t\r\n\t\t\t_this.soulGravity -= 0.25*gravModifier;\r\n\t\t}\r\n\t\t\r\n\t\t$gameVariables.setValue(97, $gameVariables.value(97)-1)\r\n\t\t\r\n\t\tif ($gameVariables.value(97) < 0) {\r\n\t\t\t\r\n\t\t\t$gameVariables.setValue(97, 0)\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\r\n\t\t\t\r\n\t\t\tif ((Input.isPressed(\"up\") || Input.isPressed(\"ok\")) && _this.isBlueSoul && ((_this.soulJumpPower > 0 && _this.soulHasJump) || ((_this.soulJumpPower == 0 && Math.abs(_this.soulGravity) < 0.5) && !_this.soulHasJump))) {\r\n\t\t\t\t\r\n\t\t\t\t_this.soulHasJump = 1;\r\n\t\t\t\t\r\n\t\t\t\t_this.soulJumpPower = (_this.soulJumpPower == 0) ? 3 : _this.soulJumpPower;\r\n\t\t\t\t\r\n\t\t\t\t_this.soulJumpPower += 0.5*gravModifier;\r\n\t\t\t\tif (_this.soulJumpPower > 10*gravModifier) {\r\n\t\t\t\t\t\r\n\t\t\t\t\t_this.soulJumpPower = 10*gravModifier;\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\t\r\n\t\tif (Input.isPressed(\"up\") && !_this.isBlueSoul) {\r\n\t\t\t\r\n\t\t\t\tif (Input.isPressed(\"shift\")) {\r\n\t\t\t\t\t\r\n\t\t\t\t\t$gameVariables.setValue(84, $gameVariables.value(84)-2)\r\n\t\t\t\t\t\r\n\t\t\t\t} else {\r\n\t\t\t\t\t\r\n\t\t\t\t\t$gameVariables.setValue(84, $gameVariables.value(84)-5)\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tif (!Input.isPressed(\"up\") && !Input.isPressed(\"ok\")) {\r\n\t\t\t\r\n\t\t\t_this.soulHasJump = 0;\r\n\t\t\t\r\n\t\t}\r\n\r\n\t\tif (Input.isPressed(\"down\") && !_this.isBlueSoul) {\r\n\t\t\t\r\n\t\t\tif (Input.isPressed(\"shift\")) {\r\n\t\t\t\t\r\n\t\t\t\t$gameVariables.setValue(84, $gameVariables.value(84)+2)\r\n\t\t\t\t\r\n\t\t\t} else {\r\n\t\t\t\t\r\n\t\t\t\t$gameVariables.setValue(84, $gameVariables.value(84)+5)\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tif (Input.isPressed(\"left\")) {\r\n\t\t\t\r\n\t\t\tif (Input.isPressed(\"shift\")) {\r\n\t\t\t\t\r\n\t\t\t\t$gameVariables.setValue(83, $gameVariables.value(83)-2)\r\n\t\t\t\t\r\n\t\t\t} else {\r\n\t\t\t\t\r\n\t\t\t\t$gameVariables.setValue(83, $gameVariables.value(83)-5)\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\r\n\t\tif (Input.isPressed(\"right\")) {\r\n\t\t\t\r\n\t\t\tif (Input.isPressed(\"shift\")) {\r\n\t\t\t\t\r\n\t\t\t\t$gameVariables.setValue(83, $gameVariables.value(83)+2)\r\n\t\t\t\t\r\n\t\t\t} else {\r\n\t\t\t\t\r\n\t\t\t\t$gameVariables.setValue(83, $gameVariables.value(83)+5)\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\tif (_this.isBlueSoul) {\r\n\t\t\t$gameVariables.setValue(84, $gameVariables.value(84) - _this.soulGravity - _this.soulJumpPower);\r\n\t\t}\r\n\t\t\r\n\t\tif (_this.ppg_attackPaternID != 5) {\r\n\t\t\tif ($gameVariables.value(83) < 452-9) {\r\n\t\t\t\t\r\n\t\t\t\t$gameVariables.setValue(83,452-9);\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif ($gameVariables.value(83) > 1280-452-27) {\r\n\t\t\t\t\r\n\t\t\t\t$gameVariables.setValue(83,1280-452-27);\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif ($gameVariables.value(84) < 84-29-5) {\r\n\t\t\t\t\r\n\t\t\t\t$gameVariables.setValue(84,84-29-5);\r\n\t\t\t\tif (_this.isBlueSoul) {\r\n\t\t\t\t\t\r\n\t\t\t\t\t_this.soulGravity = 0;\r\n\t\t\t\t\t_this.soulJumpPower = 0;\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif ($gameVariables.value(84) > 720-260-47-5) {\r\n\t\t\t\t\r\n\t\t\t\t$gameVariables.setValue(84,720-260-47-5);\r\n\t\t\t\t\r\n\t\t\t\tif (_this.isBlueSoul) {\r\n\t\t\t\t\t\r\n\t\t\t\t\t_this.soulGravity = 0;\r\n\t\t\t\t\t_this.soulJumpPower = 0;\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif ($gameVariables.value(83) < 448-9) {\r\n\t\t\t\t\r\n\t\t\t\t$gameVariables.setValue(83,448-9);\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif ($gameVariables.value(83) > 1280-448-27) {\r\n\t\t\t\t\r\n\t\t\t\t$gameVariables.setValue(83,1280-448-27);\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif ($gameVariables.value(84) < 386-29-5) {\r\n\t\t\t\t\r\n\t\t\t\t$gameVariables.setValue(84,386-29-5);\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif ($gameVariables.value(84) > 720-47-5) {\r\n\t\t\t\t\r\n\t\t\t\t$gameVariables.setValue(84,720-47-5);\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t/*if (Input.isPressed(\"cancel\") && Input.isPressed(\"down\") && _this.plshot_timer <= 0) {\r\n\t\t\t\r\n\t\t\tcreateSmallPlatform(Math.random()*1280 + _this.bhmaxwidth/2, Math.random()*600 + 100, 1)\r\n\t\t\t_this.plshot_timer = 3;\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tif (Input.isPressed(\"cancel\") && Input.isPressed(\"up\") && _this.plshot_timer <= 0) {\r\n\t\t\t\r\n\t\t\tswapSoul()\r\n\t\t\t_this.plshot_timer = 30;\r\n\t\t\t\r\n\t\t}\r\n\r\n\r\n\t\tif (Input.isPressed(\"cancel\") && !Input.isPressed(\"up\") && _this.plshot_timer <= 0) {\r\n\t\t\t\r\n\t\t\t//createGasterBlaster(Math.random()*1280 + _this.bhmaxwidth/2, Math.random()*720 + _this.bhmaxheight/2, 20, 60)\r\n\t\t\t//createTopHatLetter(Math.random()*1280 + _this.bhmaxwidth/2,20,60)\r\n\t\t\t//createTopHatBunny(Math.random()*300 + _this.bhmaxheight/2,Math.floor(Math.random()*2),20,60)\r\n\t\t\t//createDoomFinalLaser(3,10000);\r\n\t\t\t//createInvertVortex(640,272,2,43,vorid)\r\n\r\n\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t_this.plshot_timer = 20;\r\n\t\t\t\r\n\t\t}*/\r\n\t\t\r\n\t\tif ($gameSwitches.value(517) == true) {\r\n\t\t\t\r\n\t\t\tAudioManager.playSe({name: 'Damage4', pan: 0, pitch: 150, volume: 90});\r\n\t\t\t$gameScreen.startFlash([255, 255, 255, 221], 20);\r\n\t\t\t$gameSwitches.setValue(517, false);\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\tif ($gameSwitches.value(516) == true) {\r\n\t\t\t\r\n\t\t\tAudioManager.playSe({name: 'Heal2', pan: 0, pitch: 150, volume: 90});\r\n\t\t\t$gameScreen.startFlash([119, 255, 119, 221], 20);\r\n\t\t\t$gameVariables.setValue(71, $gameVariables.value(83) + 17);\r\n\t\t\t$gameVariables.setValue(72, $gameVariables.value(84) + 31);\r\n\t\t\t\r\n\t\t\tPluginManager.callCommand(thisTurn, 'TextPicture', 'set', {\r\n\t\t\t  text: \"\\\\c[4]+\\\\V[95]XP\"\r\n\t\t\t});\r\n\t\r\n\t\t\tparams = [56, \"\", 1, 1, 71, 72, 100, 100, 255, 0]\r\n\t\t\t\r\n\t\t\tpoint = Game_Interpreter.prototype.picturePoint.call(null, params);\r\n\t\t\t// prettier-ignore\r\n\t\t\t$gameScreen.showPicture(\r\n\t\t\t\tparams[0], params[1], params[2], point.x, point.y,\r\n\t\t\t\tparams[6], params[7], params[8], params[9]\r\n\t\t\t);\r\n\t\t\t\r\n\t\t\t$gameVariables.setValue(72,$gameVariables.value(72) -100);\r\n\t\t\t\r\n\t\t\tparams = [56, 0, 1, 1, 71, 72, 100, 100, 0, 0, 60, false, 0]\r\n\t\t\t\r\n\t\t\tpoint = Game_Interpreter.prototype.picturePoint.call(null, params);\r\n\t\t\t\r\n\t\t\t$gameScreen.movePicture(\r\n\t\t\t\tparams[0], params[2], point.x, point.y, params[6], params[7],\r\n\t\t\t\tparams[8], params[9], params[10], params[12] || 0\r\n\t\t\t);\r\n\t\t\tif (params[11]) {\r\n\t\t\t\tthisTurn.wait(params[10]);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t$gameSwitches.setValue(516, false);\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\tif ($gameSwitches.value(514) == true) {\r\n\t\t\t\r\n\t\t\tplayerIsHit(1)\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\tif (lastx != $gameVariables.value(83) || lasty != $gameVariables.value(84)) {\r\n\t\t\t\r\n\t\t\t_this.playerHasMove = 1;\r\n\t\t\t\r\n\t\t} else {\r\n\t\t\t\r\n\t\t\t_this.playerHasMove = 0;\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tif (_this.ppg_stop) {\r\n\t\t\t_this.PlayerCollisionX1 = 0;\r\n\t\t\t_this.PlayerCollisionX2 = 0;\r\n\t\t\t_this.PlayerCollisionY1 = 0;\r\n\t\t\t_this.PlayerCollisionY2 = 0;\r\n\t\t\t$gameVariables.setValue(83, -50);\r\n\t\t\t$gameScreen.erasePicture(2);\r\n\t\t\t$gameScreen.erasePicture(4);\r\n\t\t\t_this.clearSpinningAttack();\r\n\t\t\tAudioManager.playSe({name: 'ppg_noise', pan: 0, pitch: 100, volume: 100});\r\n\t\t\t_this.ppg_action = 0;\r\n\t\t\tthisTurn.endAction();\r\n\t\t\tthisTurn._subject = null;\r\n\t\t\t$gameScreen.erasePicture(3);\r\n\t\t\t_this.objects = [];\r\n\t\t\tConfigManager[\"battleAniSpeed\"] = $tempAniSpeed;\r\n\t\t\t$tempAniSpeed = 0;\r\n\t\t\t_this.ppg_stop = 0;\r\n\t\t}\r\n\t}\r\n}"}};
for (const BHscene in BHscenes) {
	eval('BHscenes[BHscene].load = function '+BHscenes[BHscene].load);
}